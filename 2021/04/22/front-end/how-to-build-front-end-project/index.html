<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>how to build front end project | lanzxn&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Technology Stack Program Language: TypeScript 4.x Build Tool: Vite 2.x Front End Frame: Vue 3.x Route Tool: Vue Router 4.x State Manage: Vuex 4.x UI Frame: Element Plus CSS pre-compile: Stylus &#x2F; Sass">
<meta property="og:type" content="article">
<meta property="og:title" content="how to build front end project">
<meta property="og:url" content="http://lanzxn.github.io/2021/04/22/front-end/how-to-build-front-end-project/index.html">
<meta property="og:site_name" content="lanzxn&#39;s blog">
<meta property="og:description" content="Technology Stack Program Language: TypeScript 4.x Build Tool: Vite 2.x Front End Frame: Vue 3.x Route Tool: Vue Router 4.x State Manage: Vuex 4.x UI Frame: Element Plus CSS pre-compile: Stylus &#x2F; Sass">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-04-22T08:48:38.000Z">
<meta property="article:modified_time" content="2021-04-22T08:49:06.053Z">
<meta property="article:author" content="lanzxn">
<meta property="article:tag" content="front-end">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="vite">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="lanzxn's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">lanzxn&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://lanzxn.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-front-end/how-to-build-front-end-project" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/22/front-end/how-to-build-front-end-project/" class="article-date">
  <time class="dt-published" datetime="2021-04-22T08:48:38.000Z" itemprop="datePublished">2021-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      how to build front end project
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Technology-Stack"><a href="#Technology-Stack" class="headerlink" title="Technology Stack"></a>Technology Stack</h4><ul>
<li>Program Language: <strong>TypeScript 4.x</strong></li>
<li>Build Tool: <strong>Vite 2.x</strong></li>
<li>Front End Frame: <strong>Vue 3.x</strong></li>
<li>Route Tool: <strong>Vue Router 4.x</strong></li>
<li>State Manage: <strong>Vuex 4.x</strong></li>
<li>UI Frame: <strong>Element Plus</strong></li>
<li>CSS pre-compile: <strong>Stylus / Sass / Less</strong></li>
<li>HTTP Tool: <strong>Axios</strong></li>
<li>Git Hook Tool: <strong>husky + lint-staged</strong></li>
<li>Code Specification: <strong>EditorConfig + Prettier + EsLint + Airbnb JavaScript Style Guide</strong></li>
<li>Push Specification: <strong>Commitizen + Commitlint</strong></li>
<li>Unit Test: <strong>vue-test-utils + jest + vue-jest + ts-jest</strong></li>
<li>Auto deploy: <strong>GitHub Actions</strong></li>
</ul>
<h4 id="Architecture-Construction"><a href="#Architecture-Construction" class="headerlink" title="Architecture Construction"></a>Architecture Construction</h4><p>The docs for <a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">nvm</a>.</p>
<h5 id="NodeJs"><a href="#NodeJs" class="headerlink" title="NodeJs"></a><strong>NodeJs</strong></h5><p>You need <code>Node.js</code> in your computer, what we need version of <code>Node.js</code> &gt;= 12.0.0</p>
<ol>
<li><p>check your <code>Node.js</code> version: <code>node -v</code></p>
</li>
<li><p>upgrade your <code>Node.js</code> to stable version: <code>nvm install stable</code></p>
</li>
</ol>
<p>If you use ubantu, you need to change your software source place to update its version.</p>
<p>go to the node offical site to see the nearest version</p>
<p>If the nearest version is 14.x.x, you need to execute as below in terminal.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -</span><br></pre></td></tr></table></figure>
<h5 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a><strong>Vite</strong></h5><p>the docs for <a target="_blank" rel="noopener" href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project">Vite</a></p>
<p>We use <code>Vite</code> to initialze our project</p>
<p><strong>show official introduction</strong></p>
<ol>
<li>use npm to initial: <code>npm init @vitejs/app</code></li>
<li>use yarn to initial: <code>yarn create @vitejs/app</code></li>
</ol>
<p><strong>use command line to initial project</strong></p>
<ol>
<li>npm init @vitejs/app [project-name] –template [template]</li>
<li>yarn create @vitejs/app [project-name] –template [template]</li>
</ol>
<p><strong>change Vite config file</strong></p>
<p>the docs for <a target="_blank" rel="noopener" href="https://vitejs.dev/config/#config-file">Vite config</a></p>
<p>The <code>vite.config.ts</code> is in root, and will be read while the project is starting.</p>
<p>we just make some simple config as below</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="comment">// if we don&#x27;t find the path module, we can install @types/node -&gt; npm i @types/node -D</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  plugins: [vue()],</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: resolve(__dirname, <span class="string">&#x27;src&#x27;</span>) <span class="comment">// set @ point to src directory</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  base: <span class="string">&#x27;./&#x27;</span>, <span class="comment">// set build path</span></span><br><span class="line">  server: &#123;</span><br><span class="line">    port: <span class="number">4000</span>, <span class="comment">// set start port</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">// set whether open browser when start project</span></span><br><span class="line">    cors: <span class="literal">true</span> <span class="comment">// allow cross site</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// set the proxy</span></span><br><span class="line">    <span class="comment">// proxy: &#123;</span></span><br><span class="line">    <span class="comment">//   &#x27;/api&#x27;: &#123;</span></span><br><span class="line">    <span class="comment">//     target: &#x27;http://xxx.xxx.xxx.xxx:8000&#x27;,</span></span><br><span class="line">    <span class="comment">//     changeOrigin: true,</span></span><br><span class="line">    <span class="comment">//     secure: false,</span></span><br><span class="line">    <span class="comment">//     rewrite: (path) =&gt; path.replace(&#x27;/api/&#x27;, &#x27;/&#x27;)</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="Standardize-Directory-Structure"><a href="#Standardize-Directory-Structure" class="headerlink" title="Standardize Directory Structure"></a>Standardize Directory Structure</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">├── publish&#x2F;</span><br><span class="line">└── src&#x2F;</span><br><span class="line">    ├── assets&#x2F;                    &#x2F;&#x2F; static resources</span><br><span class="line">    ├── common&#x2F;                    &#x2F;&#x2F; common class</span><br><span class="line">    ├── components&#x2F;                &#x2F;&#x2F; common components</span><br><span class="line">    ├── router&#x2F;                    &#x2F;&#x2F; router config</span><br><span class="line">    ├── store&#x2F;                     &#x2F;&#x2F; state manage</span><br><span class="line">    ├── style&#x2F;                     &#x2F;&#x2F; common css code</span><br><span class="line">    ├── utils&#x2F;                     &#x2F;&#x2F; common tools</span><br><span class="line">    ├── views&#x2F;                     &#x2F;&#x2F; page components</span><br><span class="line">    ├── App.vue</span><br><span class="line">    ├── main.ts</span><br><span class="line">    ├── shims-vue.d.ts</span><br><span class="line">├── tests&#x2F;                         &#x2F;&#x2F; unit test</span><br><span class="line">├── index.html</span><br><span class="line">├── tsconfig.json                  &#x2F;&#x2F; TypeScript config</span><br><span class="line">├── vite.config.ts                 &#x2F;&#x2F; Vite config</span><br><span class="line">└── package.json</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue Router"></a>Vue Router</h5><p>the docs for <a target="_blank" rel="noopener" href="https://next.router.vuejs.org/zh/">Vue Router4</a></p>
<ol>
<li>install router tool that support Vue3: <code>npm i vue-router@4</code></li>
<li>create route config file</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> └── src/</span><br><span class="line">     ├── router/</span><br><span class="line">         ├── index.ts  <span class="comment">// router config</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  createWebHashHistory,</span><br><span class="line">  RouteRecordRaw</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;@/views/home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;@/views/vuex.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/vuex&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;Vuex&#x27;</span>,</span><br><span class="line">    component: Vuex</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/axios&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;Axios&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/axios.vue&#x27;</span>) <span class="comment">// laze import</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHashHistory(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>in main.ts use router config</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h5><p>the docs for <a target="_blank" rel="noopener" href="https://next.vuex.vuejs.org/">vuex@next</a></p>
<ol>
<li>install state manage tools called <code>vuex@next</code> which support Vue3: <code>npm i vuex@next</code></li>
<li>create store config file</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── store/</span><br><span class="line">        ├── index.ts  <span class="comment">// store config file</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new store instance.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> defaultState</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state: <span class="keyword">typeof</span> defaultState</span>)</span> &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">      context.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="function"><span class="title">double</span>(<span class="params">state: <span class="keyword">typeof</span> defaultState</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">2</span> * state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>in main.ts use store config</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="Element-Plus"><a href="#Element-Plus" class="headerlink" title="Element Plus"></a>Element Plus</h5><p>the docs for <a target="_blank" rel="noopener" href="https://element-plus.org/#/en-US">Element Plus</a></p>
<ol>
<li>install Element Plus: <code>npm i element-plus</code></li>
<li>in main.ts use Element Plus</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(ElementPlus).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h5><ol>
<li>install axios: <code>npm i axios</code></li>
<li>config axios</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── utils/</span><br><span class="line">        ├── axios.ts  <span class="comment">// Axios config</span></span><br><span class="line"><span class="keyword">import</span> Axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ElMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;https://api.github.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> axios = Axios.create(&#123;</span><br><span class="line">  baseURL,</span><br><span class="line">  timeout: <span class="number">20000</span> <span class="comment">// request timeout</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// interceptor for request</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  (request) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> request</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// interceptor for responde</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.response &amp;&amp; error.response.data) &#123;</span><br><span class="line">      <span class="keyword">const</span> code = error.response.status</span><br><span class="line">      <span class="keyword">const</span> msg = error.response.data.message</span><br><span class="line">      ElMessage.error(<span class="string">`Code: <span class="subst">$&#123;code&#125;</span>, Message: <span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">`[Axios Error]`</span>, error.response)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ElMessage.error(<span class="string">`<span class="subst">$&#123;error&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>use axios</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;../utils/axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">    <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        axios</span><br><span class="line">        .get(<span class="string">&#x27;/users/XPoet&#x27;</span>)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;res: &#x27;</span>, res)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;err: &#x27;</span>, err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="CSS-pre-compile-Stylus-Sass-Less"><a href="#CSS-pre-compile-Stylus-Sass-Less" class="headerlink" title="CSS pre-compile Stylus/Sass/Less"></a>CSS pre-compile Stylus/Sass/Less</h5><ol>
<li>install dependency: <code>npm i stylus -D</code>, <code>npm i sass -D</code>, <code>npm i less -D</code></li>
</ol>
<h4 id="Code-Specification"><a href="#Code-Specification" class="headerlink" title="Code Specification"></a>Code Specification</h4><p>we use <code>EditorConfig</code>+<code>Prettier</code>+<code>ESLint</code> to come ture code specification</p>
<h5 id="EditorConfig"><a href="#EditorConfig" class="headerlink" title="EditorConfig"></a>EditorConfig</h5><p>the docs for <a target="_blank" rel="noopener" href="https://editorconfig.org/">EditorConfig</a></p>
<p>we put <code>.editorconfig</code> file in root directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Editor configuration, see http:&#x2F;&#x2F;editorconfig.org</span><br><span class="line"></span><br><span class="line"># Represents the top-level configuration file</span><br><span class="line">root &#x3D; true</span><br><span class="line"></span><br><span class="line">[*] # 表示所有文件适用</span><br><span class="line">charset &#x3D; utf-8 # 设置文件字符集为 utf-8</span><br><span class="line">indent_style &#x3D; space # 缩进风格（tab | space）</span><br><span class="line">indent_size &#x3D; 2 # 缩进大小</span><br><span class="line">end_of_line &#x3D; lf # 控制换行类型(lf | cr | crlf)</span><br><span class="line">trim_trailing_whitespace &#x3D; true # 去除行首的任意空白字符</span><br><span class="line">insert_final_newline &#x3D; true # 始终在文件末尾插入一个新行</span><br><span class="line"></span><br><span class="line">[*.md] # 表示仅 md 文件适用以下规则</span><br><span class="line">max_line_length &#x3D; off</span><br><span class="line">trim_trailing_whitespace &#x3D; false</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>note</strong>: if you use vscode, you need to download plugin named <code>EditorConfig for VS Code</code></p>
<h5 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h5><ol>
<li>install prettier: <code>npm i prettier -D</code></li>
<li>create prettier config file: <code>.prettierrc</code></li>
<li>config <code>.prettierrc</code></li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;bracketSpacing&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>use command to format code: <code>npx prettier --write .</code></li>
</ol>
<p><strong>note</strong>: if you use vscode, you need to download plugin named <code>Prettier - Code formatter</code></p>
<h5 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h5><ol>
<li>install ESLint: <code>npm i eslint -D</code></li>
<li>config eslint: <code>npx eslint --init</code></li>
<li>auto generate config file <code>.eslintrc.js</code> as below</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    es2021: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&#x27;plugin:vue/essential&#x27;</span>, <span class="string">&#x27;airbnb-base&#x27;</span>],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">12</span>,</span><br><span class="line">    parser: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">    sourceType: <span class="string">&#x27;module&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">  rules: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>set auto fix when we save file: <code>eslint --fix</code></li>
</ol>
<p><strong>note</strong>: </p>
<ol>
<li>if you use vscode, you need to download plugin named <code>ESLint</code></li>
<li>VSCode add code into <code>settings.json</code> as below</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;editor.codeActionsOnSave&quot;: &#123;</span><br><span class="line">    &quot;source.fixAll.eslint&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>solve the conflict between <code>Prettier</code> and <code>ESLint</code></li>
</ol>
<ul>
<li>install <code>eslint-plugin-prettier</code> and <code>eslint-config-prettier</code></li>
<li>add prettier in <code>.eslintrc.js</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//npm i eslint-plugin-prettier eslint-config-prettier -D</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;airbnb-base&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span> <span class="comment">// 添加 prettier 插件</span></span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="husky-and-lint-staged"><a href="#husky-and-lint-staged" class="headerlink" title="husky and lint-staged"></a>husky and lint-staged</h5><p>the docs for <a target="_blank" rel="noopener" href="https://typicode.github.io/husky/#/?id=usage">husky</a></p>
<ol>
<li>auto config husky: <code>npx husky-init &amp;&amp; npm install</code><ol>
<li>install husky to developement</li>
<li>create <code>.husky</code> directory</li>
<li>create <code>pre-commit</code> hook, initial command as <code>npm test</code></li>
<li>add script: <code>&quot;prepare&quot;: &quot;husky install&quot;</code></li>
</ol>
</li>
<li>config lint-staged (solve the problem that we just want to fix what we write)<ol>
<li>install <code>lint-staged</code>: <code>npm i lint-staged -D</code></li>
<li>add script: <code>&quot;lint-staged&quot;: &#123;&quot;*.&#123;vue,js,ts&#125;:&quot;: &quot;eslint --fix&quot;&#125;</code> (mean we just format git-staged file)</li>
<li>change <code>pre-commit</code> hook: <code>npx lint-staged</code></li>
</ol>
</li>
</ol>
<h4 id="Push-Specification"><a href="#Push-Specification" class="headerlink" title="Push Specification"></a>Push Specification</h4><h5 id="Commitizen"><a href="#Commitizen" class="headerlink" title="Commitizen"></a>Commitizen</h5><ol>
<li>install <code>commitizen</code>: <code>npm i commitizen -D</code></li>
<li>initial commitizen: <code>npx commitizen init cz-conventional-changelog --save-dev --save-exact</code></li>
<li>config description manully: <code>npx commitizen init cz-customizable --save-dev --save-exact --force</code><ol>
<li>create <code>.cz-config.js</code> file</li>
</ol>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// type 类型（定义之后，可通过上下键选择）</span></span><br><span class="line">  types: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;feat&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;feat:     新增功能&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;fix&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;fix:      修复 bug&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;docs&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;docs:     文档变更&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;style&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;style:    代码格式（不影响功能，例如空格、分号等格式修正）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;refactor&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;refactor: 代码重构（不包括 bug 修复、功能新增）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;perf&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;perf:     性能优化&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;test&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;test:     添加、修改测试用例&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;build&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;build:    构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;ci&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ci:       修改 CI 配置、脚本&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;chore&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;chore:    对构建过程或辅助工具和库的更改（不影响源文件、测试用例）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;revert&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;revert:   回滚 commit&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// scope 类型（定义之后，可通过上下键选择）</span></span><br><span class="line">  scopes: [</span><br><span class="line">    [<span class="string">&#x27;components&#x27;</span>, <span class="string">&#x27;组件相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;hooks&#x27;</span>, <span class="string">&#x27;hook 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;utils&#x27;</span>, <span class="string">&#x27;utils 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;element-ui&#x27;</span>, <span class="string">&#x27;对 element-ui 的调整&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;styles&#x27;</span>, <span class="string">&#x27;样式相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;deps&#x27;</span>, <span class="string">&#x27;项目依赖&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;auth&#x27;</span>, <span class="string">&#x27;对 auth 修改&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;other&#x27;</span>, <span class="string">&#x27;其他修改&#x27;</span>],</span><br><span class="line">    <span class="comment">// 如果选择 custom，后面会让你再输入一个自定义的 scope。也可以不设置此项，把后面的 allowCustomScopes 设置为 true</span></span><br><span class="line">    [<span class="string">&#x27;custom&#x27;</span>, <span class="string">&#x27;以上都不是？我要自定义&#x27;</span>]</span><br><span class="line">  ].map(<span class="function">(<span class="params">[value, description]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      name: <span class="string">`<span class="subst">$&#123;value.padEnd(<span class="number">30</span>)&#125;</span> (<span class="subst">$&#123;description&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否允许自定义填写 scope，在 scope 选择的时候，会有 empty 和 custom 可以选择。</span></span><br><span class="line">  <span class="comment">// allowCustomScopes: true,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// allowTicketNumber: false,</span></span><br><span class="line">  <span class="comment">// isTicketNumberRequired: false,</span></span><br><span class="line">  <span class="comment">// ticketNumberPrefix: &#x27;TICKET-&#x27;,</span></span><br><span class="line">  <span class="comment">// ticketNumberRegExp: &#x27;\\d&#123;1,5&#125;&#x27;,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 针对每一个 type 去定义对应的 scopes，例如 fix</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  scopeOverrides: &#123;</span></span><br><span class="line"><span class="comment">    fix: [</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;merge&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;style&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;e2eTest&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;unitTest&#x27; &#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 交互提示信息</span></span><br><span class="line">  messages: &#123;</span><br><span class="line">    type: <span class="string">&#x27;确保本次提交遵循 Angular 规范！\n选择你要提交的类型：&#x27;</span>,</span><br><span class="line">    scope: <span class="string">&#x27;\n选择一个 scope（可选）：&#x27;</span>,</span><br><span class="line">    <span class="comment">// 选择 scope: custom 时会出下面的提示</span></span><br><span class="line">    customScope: <span class="string">&#x27;请输入自定义的 scope：&#x27;</span>,</span><br><span class="line">    subject: <span class="string">&#x27;填写简短精炼的变更描述：\n&#x27;</span>,</span><br><span class="line">    body:</span><br><span class="line">      <span class="string">&#x27;填写更加详细的变更描述（可选）。使用 &quot;|&quot; 换行：\n&#x27;</span>,</span><br><span class="line">    breaking: <span class="string">&#x27;列举非兼容性重大的变更（可选）：\n&#x27;</span>,</span><br><span class="line">    footer: <span class="string">&#x27;列举出所有变更的 ISSUES CLOSED（可选）。 例如: #31, #34：\n&#x27;</span>,</span><br><span class="line">    confirmCommit: <span class="string">&#x27;确认提交？&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置只有 type 选择了 feat 或 fix，才询问 breaking message</span></span><br><span class="line">  allowBreakingChanges: [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 跳过要询问的步骤</span></span><br><span class="line">  <span class="comment">// skipQuestions: [&#x27;body&#x27;, &#x27;footer&#x27;],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// subject 限制长度</span></span><br><span class="line">  subjectLimit: <span class="number">100</span></span><br><span class="line">  breaklineChar: <span class="string">&#x27;|&#x27;</span>, <span class="comment">// 支持 body 和 footer</span></span><br><span class="line">  <span class="comment">// footerPrefix : &#x27;ISSUES CLOSED:&#x27;</span></span><br><span class="line">  <span class="comment">// askForBreakingChangeFirst : true,</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="CommitLint"><a href="#CommitLint" class="headerlink" title="CommitLint"></a>CommitLint</h5><ol>
<li>install CommitLint: <code>npm i @commitlint/config-conventional @commitlint/cli -D</code></li>
<li>configt commitlint<ol>
<li>create <code>commitlint.config.js</code> in root directory</li>
<li>put content into it: <code>module.exports = &#123; extends: [&#39;@commitlint/config-conventional&#39;] &#125;</code></li>
</ol>
</li>
<li>use husky’s <code>commit-ms</code> hook to check<ol>
<li>create <code>commit-msg</code> file in .husky</li>
<li>put content into it: <code>npx --no-install commitlint --edit</code></li>
</ol>
</li>
</ol>
<h4 id="Unit-Test"><a href="#Unit-Test" class="headerlink" title="Unit Test"></a>Unit Test</h4><p>use <code>vue-test-utils</code> + <code>jest</code> + <code>vue-jest</code> + <code>ts-jest</code> to test our project.</p>
<ol>
<li>install : <code>npm i @vue/test-utils@next jest vue-jest@next ts-jest -D</code></li>
<li>create jest config file</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  moduleFileExtensions: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;ts&#x27;</span>],</span><br><span class="line">  preset: <span class="string">&#x27;ts-jest&#x27;</span>,</span><br><span class="line">  testEnvironment: <span class="string">&#x27;jsdom&#x27;</span>,</span><br><span class="line">  transform: &#123;</span><br><span class="line">    <span class="string">&#x27;^.+\\.vue$&#x27;</span>: <span class="string">&#x27;vue-jest&#x27;</span>, <span class="comment">// vue file use vue-jest</span></span><br><span class="line">    <span class="string">&#x27;^.+\\.ts$&#x27;</span>: <span class="string">&#x27;ts-jest&#x27;</span> <span class="comment">// ts fiel use ts-jest</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// match .test.js/ts file in __tests__ directory</span></span><br><span class="line">  testRegex: <span class="string">&#x27;(/__tests__/.*|(\\.|/)(test|spec))\\.(ts)$&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="create-unit-test-file"><a href="#create-unit-test-file" class="headerlink" title="create unit test file"></a>create unit test file</h5><ol>
<li>create test directory</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">├── src/</span><br><span class="line">└── tests/                           <span class="comment">// unit test directory</span></span><br><span class="line">    ├── Test.spec.ts                 <span class="comment">// Test component test</span></span><br><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">&#x27;../src/views/Test.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">test(<span class="string">&#x27;Test.vue&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = mount(Test)</span><br><span class="line">  expect(wrapper.html()).toContain(<span class="string">&#x27;Unit Test Page&#x27;</span>)</span><br><span class="line">  expect(wrapper.html()).toContain(<span class="string">&#x27;count is: 0&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> wrapper.find(<span class="string">&#x27;button&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">  expect(wrapper.html()).toContain(<span class="string">&#x27;count is: 1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>note</strong>: </p>
<ol>
<li>if the IDE prompts that some methods do not exist, we just need to install <code>@types/jest</code> to solve that</li>
<li>we also need to add <code>@types/jest</code> to <code>ts.config.json</code></li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;types&quot;</span>: [<span class="string">&quot;vite/client&quot;</span>, <span class="string">&quot;jest&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Eslint-plugin-jest"><a href="#Eslint-plugin-jest" class="headerlink" title="Eslint-plugin-jest"></a>Eslint-plugin-jest</h5><p>we need <code>eslint-plugin-jest</code> to relieve the validation of eslint for jest file.</p>
<ol>
<li>install: <code>npm i eslint-plugin-jest -D</code></li>
<li>add eslint-plugin-jest to eslint config file</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">extends</span>: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;plugin:jest/recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="execute-unit-test"><a href="#execute-unit-test" class="headerlink" title="execute unit test"></a>execute unit test</h5><ol>
<li>add script to <code>packjson.json</code>: <code>&quot;test&quot;:&quot;jest&quot;</code></li>
<li>use husky to constraint push operation</li>
<li>execute command: <code>npx husky add .husky/pre-push &quot;npm run test $1&quot;</code></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://lanzxn.github.io/2021/04/22/front-end/how-to-build-front-end-project/" data-id="cknsn8xei000597jxb1yi6b7w" data-title="how to build front end project" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/front-end/" rel="tag">front-end</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vite/" rel="tag">vite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/02/08/ubantu/how-to-config-environment-variable-in-ubantu/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">how-to-config-environment-variable-in-ubantu</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/front-end/" rel="tag">front-end</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubantu/" rel="tag">ubantu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vite/" rel="tag">vite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/front-end/" style="font-size: 10px;">front-end</a> <a href="/tags/ubantu/" style="font-size: 20px;">ubantu</a> <a href="/tags/vite/" style="font-size: 10px;">vite</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/22/front-end/how-to-build-front-end-project/">how to build front end project</a>
          </li>
        
          <li>
            <a href="/2021/02/08/ubantu/how-to-config-environment-variable-in-ubantu/">how-to-config-environment-variable-in-ubantu</a>
          </li>
        
          <li>
            <a href="/2021/01/26/ubantu/how-to-install-jdk-in-ubantu/">how-to-install-jdk-in-ubantu</a>
          </li>
        
          <li>
            <a href="/2021/01/24/ubantu/how-to-manipulate-short-cut-in-ubantu/">how-to-manipulate-short-cut-in-ubantu</a>
          </li>
        
          <li>
            <a href="/2021/01/18/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 lanzxn<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>